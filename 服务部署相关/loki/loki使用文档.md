# loki使用文档

## 日志流选择器

日志流选择器决定了哪些日志流应该被包含在查询结果中

格式：`{标签="标签值"}`，标签可以写多个，用逗号`,`分隔。例如`{instance="192.168.50.196",service="wk_plm"}`

其中标签后面的 `=` 运算符是标签匹配运算符，LogQL一共支持以下四种标签匹配运算符：

1. `=`：完全匹配

2. `!=`：不相等
                                                         
3. `=~`：正则匹配

4. `!~`：正则不匹配



目前配置的标签只有三种：

1. filename：值是具体的文件绝对路径

2. service：值是wk_admin、wk_file、wk_login、wk_model、wk_plm、wk_resource、wk_search中的一个

3. instance：值是节点ip，目前只有192.168.50.196


## 日志行过滤器

日志行过滤器接在日志流选择器之后，支持下面几种运算符：


1. `|=`：日志行包含的字符串

2. `!=`：日志行不包含的字符串

3. `|~`：日志行匹配正则表达式

4. `!~`：日志行与正则表达式不匹配

例如：

`{job="mysql"} |= "uri: /plm/boros/save"`

`{job="mysql"} |~ "(?i)error"`

`{job="mysql"} |= "user: zzw.*?uri: /plm/boros/save"`



