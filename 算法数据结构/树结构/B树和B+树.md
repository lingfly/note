### B树
B树是一颗多叉查找树，同时也是一颗平衡树

**相比红黑树，B树降低了高度，减少了查找次数**

对于一颗M阶的B树，其结构特性：

1. 树的根要么是一片叶子，要么子节点数在2和M之间
2. 如果一个节点不是根，则其子节点数在M/2(取上界)和M之间
3. 所有的叶子节点在同一层上

叶子节点不存放关键字，所有可以把叶子节点看成树中不存在的外部节点，非叶节点则看成内部节点

设一个内部节点有m个关键字，则有m+1个子树(有m+1个指针分别指向对应子树)

对于每一个节点，第k颗子树的关键字要比第k-1颗子树的所有关键字大，比第k+1颗子树的关键字小

在B树中：

1. 第1层(也就是根节点)最少节点数为1
2. 第2层最少节点数为2(性质1)
3. 第3层最少节点数为2*(m/2)
4. 第4层最少节点数为2*[(m/2)^2]
5. 第L层最少节点数为2*[(m/2)^(L-2)]

可得B树的高度L<=(log m/2)[(N+1)/2]+2

以上计算m/2均取上界

### 插入操作
1. 找到关键字对应的节点，执行插入
2. 插入后检查节点内关键字数是否超过限制(要求小于m)
3. 如果超过限制，可以考虑分给兄弟节点，然后修改其父节点的关键字
4. 如果兄弟节点不足以容纳关键字，则该节点分裂成两个节点，把中间关键字上浮到父节点，左右两部分关键字分裂到两个节点上
5. 如果关键字上浮后父节点关键字超过限制，则接着分裂

### 删除操作
1. 找到关键字对应的节点，执行删除
2. 删除后检查节点内关键字数是否小于限制(除根外要求大于m/2取上界)
3. 如果小于限制，可以考虑向兄弟节点借关键字，然后修改其父节点的关键字
4. 如果兄弟节点不足以借关键字，则该节点合并成一个节点

### B+树
B+树特点

1. B+树是B树的一种变形，它把数据都存储在叶子节点，内部只存关键字（其中叶子节点的最小值作为索引）和孩子指针，简化了内部节点。
2. B+树的遍历高效，将所以叶子节点串联成链表即可从头到尾遍历，

#### 为什么B+树比B树更适合做系统的数据库索引和文件索引
1. B+树的磁盘读写代价更低,因为B+树内部结点没有指向关键字具体信息的指针，内部结点相对B树小
2. B+树的查询更加稳定,因为非终端结点并不是指向文件内容的结点，仅仅是作为叶子结点的关键字索引，因此所有的关键字查询都会走一条从根节点到叶子结点的路径。即s所有关键字查询的长度是一样的，查询效率稳定。