



## 版本对问题功能的影响

1. 现状：模型只能看到当前版本的问题

## 事务问题

1. 在grpc_coll服务的升版接口开始事，然后调用文件服务上传， grpc_coll服务无法看到文件服务的事务提交

## 载入构件问题

1. 载入父构件时载入子构件
2. 是否还需要进度条


## 权限配置

fromconnect/toconnect/fromdisconnect/todisconnect: 创建、编辑、删除

## 20241010

1. 权限管理：缺签名权限和类型权限
    1. 需求上owner和其他角色有不同的修改状态权限，但是目前签名权限不支持设置给public和owner
    2. 签名key和表达式用同一个字段，签名要用不同表达式时，修改同一个状态要用不同的签名
    3. 新建type，family和type在同一次保存里提交，type的权限依赖family的项目权限，需要找project到family的ro，但是表达式不支持搜索本次保存的ro
2. 升版：修改复制逻辑
3. 修改状态校验有无构件实例
4. 删除校验有无被引用
5. 复制构件
6. 查询列表

### type

#### 新建版本

1. 不复制参数定义，复制参数值
2. 不复制引用的子构件类型

#### 更改状态到发布

1. 判断构件类型引用子构件类型是否未发布

#### 更改owner

#### 删除

1. 删除type，是修改状态
2. 用删除的type，保存失败

#### 重名名

1. 判断类型在项目内不重名
2. 当前项目-ro-type + type->family->proejct-ro-type

#### 保存前做构件和类型是否更新的校验

#### 删除模型构件要判断所有版本没有实例

#### 问题点 

1. 删除type，是设置删除状态还是直接删除，要不要删除指向type的ro
2. 新建type，family和type在同一次保存里提交，表达式不支持搜索本次保存的ro
3. family升版，是否需要对type升版
4. family发布，是否对type发布
5. type重命名，是否新接口，是否校验family内重名？




## 修改文档状态的接口要改case

## 1030

1. 对于工作中的构件增加参数，需要类型都为工作中，才能增加参数
2. 对于工作中的构件，类型不能由工作中改为发布状态
3. 构件工作中改为发布状态，类型也将改为发布状态
4. 类型在项目内不重名
5. 只复制最新版类型

## ao修改的同步

## 20241104

1. 对于工作中的构件，类型不能由工作中改为发布状态
2. 构件工作中改为发布状态，类型也将改为发布状态
3. 构件升版，只复制最新版类型
4. 测试鉴权接口
5. 类型策略和权限定义
6. 修改文档状态接口的case
7. 删除模型构件要判断所有版本没有实例
8. 类型升版，添加项目-类型ro
9. 新增接口，添加项目-类型ro


## 

1. 类型删除：删除ro，类型该状态，判断有无实例
2. 接口1：判断有无实例，有无嵌套
3. 接口2：查询构件下所有类型
4. 类型重名：同一family下类型的不同版本可以重名
5. 文档编辑时间
6. 删除文档，如何处理剩下的版本

##

1. 升版有多余复制
2. 构件升版复制最新版类型，其余版本的子节点目前也复制

## 权限提测问题

1. 发布的构件应该Leader才能删除
2. member/owner对冻结文档应该不能打开
3. project leader、project owner应该有清除占用的权限

## 20241120

1. 表达式cond1和签名sign1，表达式cond2和签名sign2，用户a满足cond1不满足cond2，传入的签名是sign2，期望是无权限，目前实际结果有权限
2. 删除模型后，实例仍指向载入构件的类型，导致构件无法删除
3. 删除构件后，对构件下类型的查询
4. 适配模型模板：1. 项目到模型的ro增加属性，增加接口判断模型模型模板
5. 复制完整构件
6. 项目/企业类型依赖前端保存项目-类型的ro