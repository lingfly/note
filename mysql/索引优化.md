### 单列索引
使用条件：

1. 索引列不能是表达式的一部分
2. 索引列不能是函数的参数
3. like表达式不能以'%','_'开头

第3点存疑：在mysql5.7的explain解释中以'%','_'开头仍能使用索引，但扫描行数未被优化

#### 辅助索引优化
当需要查询的数据仅包含主键和索引列时，会使用辅助索引优化，不需要通过聚集索引也能得到查询结果

原理：

1. 辅助索引存放了索引列数据，并且叶子节点存放了主键数据
2. 辅助索引不包含行数据，每页可存放数据比聚集索引多，所以优化器选择辅助索引

实例：

使用了辅助索引优化，结果按索引列排序

![辅助索引优化](\resources\辅助索引优化.png)

查询的数据不只是主键和索引列时未使用优化，通过辅助索引查询得到主键之后，再对主键使用聚集索引，得到的结果按主键排序

![聚集索引](\resources\聚集索引.png)



### 多列索引
也叫联合索引，多列索引本质上也是B+树，对于一个索引(a,b),得到结果按(a,b)进行排序，a值相等时对b排序
![多列索引](\resources\double_key_B+Tree.png)


1. 用多个列值查询时多列索引的性能要比单列好
2. 可以对第二个索引列进行排序
3. 只有查询条件中使用了第一个索引字段时，索引才被使用
4. 当条件有or关键字时，or两边都是索引列时才使用多列索引


### 索引列的顺序
让选择性最强的索引列放在前面。

索引的选择性是指：不重复的索引值和记录总数的比值。最大值为 1，此时每个记录都有唯一的索引与其对应。选择性越高，查询效率也越高。

### 覆盖索引
覆盖索引就是索引的字段包括了查询条件用到的所有字段

这样建立的B+树索引中，就存放了需要查询的所有数据，不需要对行数据进行查询

执行计划使用覆盖索引的标志是
```cmd
Extra: Using index
```

### 前缀索引
对于 BLOB、TEXT 和 VARCHAR 类型的列，必须使用前缀索引，只索引开始的部分字符。

对于前缀长度的选取需要根据索引选择性来确定。