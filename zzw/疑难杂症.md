# 

## 内存溢导致redis线程池shutdown

## Propagation.NOT_SUPPORTED 解决锁超时问题？

## 阿里云跨可用区性能暴跌

## mysql index_merge intersect

```sql
-- 复现步骤：创建表和数据
CREATE TABLE `obj_rel_1` (
  `oid` bigint NOT NULL DEFAULT '0',
  `created_at` bigint NOT NULL,
  `updated_at` bigint NOT NULL,
  `flags` int NOT NULL DEFAULT '0',
  `owner` bigint NOT NULL DEFAULT '0',
  `prj_oid` bigint NOT NULL DEFAULT '0',
  `org_oid` bigint NOT NULL DEFAULT '0',
  `locked_by` bigint NOT NULL DEFAULT '0',
  `locked_at` bigint NOT NULL DEFAULT '0',
  `type_oid` bigint NOT NULL DEFAULT '0',
  `rx_type` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL DEFAULT '',
  `from_prj_oid` bigint NOT NULL DEFAULT '0',
  `from_oid` bigint NOT NULL DEFAULT '0',
  `from_type_oid` bigint NOT NULL DEFAULT '0',
  `to_prj_oid` bigint NOT NULL DEFAULT '0',
  `to_oid` bigint NOT NULL DEFAULT '0',
  `to_type_oid` bigint NOT NULL DEFAULT '0',
  `tenant_id` bigint NOT NULL DEFAULT '1',
  `from_kind` tinyint NOT NULL DEFAULT '0',
  `from_lat_num` int NOT NULL DEFAULT '0',
  `to_kind` tinyint NOT NULL DEFAULT '0',
  `to_lat_num` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`oid` DESC) USING BTREE,
  KEY `to_index` (`to_oid`),
  KEY `from_index` (`from_oid`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci ROW_FORMAT=DYNAMIC;



INSERT INTO `obj_rel_1` (`oid`, `created_at`, `updated_at`, `flags`, `owner`, `prj_oid`, `org_oid`, `locked_by`, `locked_at`, `type_oid`, `rx_type`, `from_prj_oid`, `from_oid`, `from_type_oid`, `to_prj_oid`, `to_oid`, `to_type_oid`, `tenant_id`, `from_kind`, `from_lat_num`, `to_kind`, `to_lat_num`) VALUES (450366539436037, 1692089170, 1692089602, 0, 450366389100677, 450014810120261, 450014810067013, 0, 0, 450014723739717, '', 450014810120261, 450363225051141, 450014654951493, 450014810120261, 450366389133445, 450014599127109, 1, 1, 1, 1, 1);
INSERT INTO `obj_rel_1` (`oid`, `created_at`, `updated_at`, `flags`, `owner`, `prj_oid`, `org_oid`, `locked_by`, `locked_at`, `type_oid`, `rx_type`, `from_prj_oid`, `from_oid`, `from_type_oid`, `to_prj_oid`, `to_oid`, `to_type_oid`, `tenant_id`, `from_kind`, `from_lat_num`, `to_kind`, `to_lat_num`) VALUES (450365635739653, 1692088949, 1692088949, 0, 450017298673797, 450014810120261, 450014810067013, 0, 0, 450014724091973, '', 450014810120261, 450017298739333, 450014599127109, 450014810120261, 450365633315013, 450362368155717, 1, 1, 1, 1, 1);
INSERT INTO `obj_rel_1` (`oid`, `created_at`, `updated_at`, `flags`, `owner`, `prj_oid`, `org_oid`, `locked_by`, `locked_at`, `type_oid`, `rx_type`, `from_prj_oid`, `from_oid`, `from_type_oid`, `to_prj_oid`, `to_oid`, `to_type_oid`, `tenant_id`, `from_kind`, `from_lat_num`, `to_kind`, `to_lat_num`) VALUES (450365635268613, 1692088949, 1692088949, 0, 450017298673797, 450014810120261, 450014810067013, 0, 0, 450014724264005, '', 450014810120261, 450363225051141, 450014654951493, 450014810120261, 450365633315013, 450362368155717, 1, 1, 1, 1, 1);
INSERT INTO `obj_rel_1` (`oid`, `created_at`, `updated_at`, `flags`, `owner`, `prj_oid`, `org_oid`, `locked_by`, `locked_at`, `type_oid`, `rx_type`, `from_prj_oid`, `from_oid`, `from_type_oid`, `to_prj_oid`, `to_oid`, `to_type_oid`, `tenant_id`, `from_kind`, `from_lat_num`, `to_kind`, `to_lat_num`) VALUES (450365634896069, 1692088949, 1692088949, 0, 450017298673797, 450014810120261, 450014810067013, 0, 0, 450014610206789, '', 450014810120261, 450017298739333, 450014599127109, 450014810120261, 450365633315013, 450362368155717, 1, 1, 1, 1, 1);
INSERT INTO `obj_rel_1` (`oid`, `created_at`, `updated_at`, `flags`, `owner`, `prj_oid`, `org_oid`, `locked_by`, `locked_at`, `type_oid`, `rx_type`, `from_prj_oid`, `from_oid`, `from_type_oid`, `to_prj_oid`, `to_oid`, `to_type_oid`, `tenant_id`, `from_kind`, `from_lat_num`, `to_kind`, `to_lat_num`) VALUES (450363225174021, 1692088361, 1692088361, 0, 450017298673797, 450014810120261, 450014810067013, 0, 0, 450014723739717, '', 450014810120261, 450363225051141, 450014654951493, 450014810120261, 450017298739333, 450014599127109, 1, 1, 1, 1, 1);
INSERT INTO `obj_rel_1` (`oid`, `created_at`, `updated_at`, `flags`, `owner`, `prj_oid`, `org_oid`, `locked_by`, `locked_at`, `type_oid`, `rx_type`, `from_prj_oid`, `from_oid`, `from_type_oid`, `to_prj_oid`, `to_oid`, `to_type_oid`, `tenant_id`, `from_kind`, `from_lat_num`, `to_kind`, `to_lat_num`) VALUES (450359435874309, 1692087436, 1692087436, 0, 450353963458693, 450014810120261, 450014810067013, 0, 0, 450014723739717, '', 450014810120261, 450359435755525, 450014654918725, 450014810120261, 450353963466885, 450014599127109, 1, 1, 1, 1, 1);
INSERT INTO `obj_rel_1` (`oid`, `created_at`, `updated_at`, `flags`, `owner`, `prj_oid`, `org_oid`, `locked_by`, `locked_at`, `type_oid`, `rx_type`, `from_prj_oid`, `from_oid`, `from_type_oid`, `to_prj_oid`, `to_oid`, `to_type_oid`, `tenant_id`, `from_kind`, `from_lat_num`, `to_kind`, `to_lat_num`) VALUES (450359418138629, 1692087431, 1692087431, 0, 450353963458693, 450014810120261, 450014810067013, 0, 0, 450014723739717, '', 450014810120261, 450359418056709, 450014654918725, 450014810120261, 450353963466885, 450014599127109, 1, 1, 1, 1, 1);
INSERT INTO `obj_rel_1` (`oid`, `created_at`, `updated_at`, `flags`, `owner`, `prj_oid`, `org_oid`, `locked_by`, `locked_at`, `type_oid`, `rx_type`, `from_prj_oid`, `from_oid`, `from_type_oid`, `to_prj_oid`, `to_oid`, `to_type_oid`, `tenant_id`, `from_kind`, `from_lat_num`, `to_kind`, `to_lat_num`) VALUES (450359398449157, 1692087427, 1692087427, 0, 450353963458693, 450014810120261, 450014810067013, 0, 0, 450014723739717, '', 450014810120261, 450359398363141, 450014654918725, 450014810120261, 450353963466885, 450014599127109, 1, 1, 1, 1, 1);
INSERT INTO `obj_rel_1` (`oid`, `created_at`, `updated_at`, `flags`, `owner`, `prj_oid`, `org_oid`, `locked_by`, `locked_at`, `type_oid`, `rx_type`, `from_prj_oid`, `from_oid`, `from_type_oid`, `to_prj_oid`, `to_oid`, `to_type_oid`, `tenant_id`, `from_kind`, `from_lat_num`, `to_kind`, `to_lat_num`) VALUES (450359328342021, 1692087409, 1692087409, 0, 450353963458693, 450014810120261, 450014810067013, 0, 0, 450014723739717, '', 450014810120261, 450359328260101, 450014654918725, 450014810120261, 450353963466885, 450014599127109, 1, 1, 1, 1, 1);
INSERT INTO `obj_rel_1` (`oid`, `created_at`, `updated_at`, `flags`, `owner`, `prj_oid`, `org_oid`, `locked_by`, `locked_at`, `type_oid`, `rx_type`, `from_prj_oid`, `from_oid`, `from_type_oid`, `to_prj_oid`, `to_oid`, `to_type_oid`, `tenant_id`, `from_kind`, `from_lat_num`, `to_kind`, `to_lat_num`) VALUES (450359308406789, 1692087405, 1692087405, 0, 450353963458693, 450014810120261, 450014810067013, 0, 0, 450014723739717, '', 450014810120261, 450359308259333, 450014654918725, 450014810120261, 450353963466885, 450014599127109, 1, 1, 1, 1, 1);
INSERT INTO `obj_rel_1` (`oid`, `created_at`, `updated_at`, `flags`, `owner`, `prj_oid`, `org_oid`, `locked_by`, `locked_at`, `type_oid`, `rx_type`, `from_prj_oid`, `from_oid`, `from_type_oid`, `to_prj_oid`, `to_oid`, `to_type_oid`, `tenant_id`, `from_kind`, `from_lat_num`, `to_kind`, `to_lat_num`) VALUES (450359271596037, 1692087396, 1692087396, 0, 450353963458693, 450014810120261, 450014810067013, 0, 0, 450014723739717, '', 450014810120261, 450359271514117, 450014654918725, 450014810120261, 450353963466885, 450014599127109, 1, 1, 1, 1, 1);
INSERT INTO `obj_rel_1` (`oid`, `created_at`, `updated_at`, `flags`, `owner`, `prj_oid`, `org_oid`, `locked_by`, `locked_at`, `type_oid`, `rx_type`, `from_prj_oid`, `from_oid`, `from_type_oid`, `to_prj_oid`, `to_oid`, `to_type_oid`, `tenant_id`, `from_kind`, `from_lat_num`, `to_kind`, `to_lat_num`) VALUES (450359174295557, 1692087372, 1692087372, 0, 450353963458693, 450014810120261, 450014810067013, 0, 0, 450014723739717, '', 450014810120261, 450359174209541, 450014654918725, 450014810120261, 450353963466885, 450014599127109, 1, 1, 1, 1, 1);
INSERT INTO `obj_rel_1` (`oid`, `created_at`, `updated_at`, `flags`, `owner`, `prj_oid`, `org_oid`, `locked_by`, `locked_at`, `type_oid`, `rx_type`, `from_prj_oid`, `from_oid`, `from_type_oid`, `to_prj_oid`, `to_oid`, `to_type_oid`, `tenant_id`, `from_kind`, `from_lat_num`, `to_kind`, `to_lat_num`) VALUES (450359150575621, 1692087366, 1692087366, 0, 450353963458693, 450014810120261, 450014810067013, 0, 0, 450014723739717, '', 450014810120261, 450359150481413, 450014654918725, 450014810120261, 450353963466885, 450014599127109, 1, 1, 1, 1, 1);
INSERT INTO `obj_rel_1` (`oid`, `created_at`, `updated_at`, `flags`, `owner`, `prj_oid`, `org_oid`, `locked_by`, `locked_at`, `type_oid`, `rx_type`, `from_prj_oid`, `from_oid`, `from_type_oid`, `to_prj_oid`, `to_oid`, `to_type_oid`, `tenant_id`, `from_kind`, `from_lat_num`, `to_kind`, `to_lat_num`) VALUES (450359104094213, 1692087355, 1692087355, 0, 450353963458693, 450014810120261, 450014810067013, 0, 0, 450014723739717, '', 450014810120261, 450359104000005, 450014654918725, 450014810120261, 450353963466885, 450014599127109, 1, 1, 1, 1, 1);
INSERT INTO `obj_rel_1` (`oid`, `created_at`, `updated_at`, `flags`, `owner`, `prj_oid`, `org_oid`, `locked_by`, `locked_at`, `type_oid`, `rx_type`, `from_prj_oid`, `from_oid`, `from_type_oid`, `to_prj_oid`, `to_oid`, `to_type_oid`, `tenant_id`, `from_kind`, `from_lat_num`, `to_kind`, `to_lat_num`) VALUES (450359066247173, 1692087345, 1692087345, 0, 450353963458693, 450014810120261, 450014810067013, 0, 0, 450014723739717, '', 450014810120261, 450359066165253, 450014654918725, 450014810120261, 450353963466885, 450014599127109, 1, 1, 1, 1, 1);
INSERT INTO `obj_rel_1` (`oid`, `created_at`, `updated_at`, `flags`, `owner`, `prj_oid`, `org_oid`, `locked_by`, `locked_at`, `type_oid`, `rx_type`, `from_prj_oid`, `from_oid`, `from_type_oid`, `to_prj_oid`, `to_oid`, `to_type_oid`, `tenant_id`, `from_kind`, `from_lat_num`, `to_kind`, `to_lat_num`) VALUES (450358754181125, 1692087269, 1692087269, 0, 450353963458693, 450014810120261, 450014810067013, 0, 0, 450014723739717, '', 450014810120261, 450358754062341, 450014654951493, 450014810120261, 450353963466885, 450014599127109, 1, 1, 1, 1, 1);
INSERT INTO `obj_rel_1` (`oid`, `created_at`, `updated_at`, `flags`, `owner`, `prj_oid`, `org_oid`, `locked_by`, `locked_at`, `type_oid`, `rx_type`, `from_prj_oid`, `from_oid`, `from_type_oid`, `to_prj_oid`, `to_oid`, `to_type_oid`, `tenant_id`, `from_kind`, `from_lat_num`, `to_kind`, `to_lat_num`) VALUES (450358102691845, 1692087110, 1692087110, 0, 450353963458693, 450014810120261, 450014810067013, 0, 0, 450014723739717, '', 450014810120261, 450358102597637, 450014654951493, 450014810120261, 450353963466885, 450014599127109, 1, 1, 1, 1, 1);
INSERT INTO `obj_rel_1` (`oid`, `created_at`, `updated_at`, `flags`, `owner`, `prj_oid`, `org_oid`, `locked_by`, `locked_at`, `type_oid`, `rx_type`, `from_prj_oid`, `from_oid`, `from_type_oid`, `to_prj_oid`, `to_oid`, `to_type_oid`, `tenant_id`, `from_kind`, `from_lat_num`, `to_kind`, `to_lat_num`) VALUES (450358019813381, 1692087090, 1692087090, 0, 450353963458693, 450014810120261, 450014810067013, 0, 0, 450014723739717, '', 450014810120261, 450358019665925, 450014654951493, 450014810120261, 450353963466885, 450014599127109, 1, 1, 1, 1, 1);
INSERT INTO `obj_rel_1` (`oid`, `created_at`, `updated_at`, `flags`, `owner`, `prj_oid`, `org_oid`, `locked_by`, `locked_at`, `type_oid`, `rx_type`, `from_prj_oid`, `from_oid`, `from_type_oid`, `to_prj_oid`, `to_oid`, `to_type_oid`, `tenant_id`, `from_kind`, `from_lat_num`, `to_kind`, `to_lat_num`) VALUES (450332380262405, 1692080830, 1692080830, 0, 450330343403653, 450014810120261, 450014810067013, 0, 0, 450014723739717, '', 450014810120261, 450332380073989, 450014654918725, 450014810120261, 450330343415941, 450014599127109, 1, 1, 1, 1, 1);
INSERT INTO `obj_rel_1` (`oid`, `created_at`, `updated_at`, `flags`, `owner`, `prj_oid`, `org_oid`, `locked_by`, `locked_at`, `type_oid`, `rx_type`, `from_prj_oid`, `from_oid`, `from_type_oid`, `to_prj_oid`, `to_oid`, `to_type_oid`, `tenant_id`, `from_kind`, `from_lat_num`, `to_kind`, `to_lat_num`) VALUES (450331813822469, 1692080692, 1692080692, 0, 450330343403653, 450014810120261, 450014810067013, 0, 0, 450014723739717, '', 450014810120261, 450331813670917, 450014654840901, 450014810120261, 450330343415941, 450014599127109, 1, 1, 1, 1, 1);
INSERT INTO `obj_rel_1` (`oid`, `created_at`, `updated_at`, `flags`, `owner`, `prj_oid`, `org_oid`, `locked_by`, `locked_at`, `type_oid`, `rx_type`, `from_prj_oid`, `from_oid`, `from_type_oid`, `to_prj_oid`, `to_oid`, `to_type_oid`, `tenant_id`, `from_kind`, `from_lat_num`, `to_kind`, `to_lat_num`) VALUES (450030884634629, 1692007223, 1692007223, 0, 450014812377157, 450014810120261, 450014810067013, 0, 0, 450014723739717, '', 450014810120261, 450026929364997, 450014654951493, 450014810120261, 450014823432261, 450014599127109, 1, 1, 1, 1, 1);
INSERT INTO `obj_rel_1` (`oid`, `created_at`, `updated_at`, `flags`, `owner`, `prj_oid`, `org_oid`, `locked_by`, `locked_at`, `type_oid`, `rx_type`, `from_prj_oid`, `from_oid`, `from_type_oid`, `to_prj_oid`, `to_oid`, `to_type_oid`, `tenant_id`, `from_kind`, `from_lat_num`, `to_kind`, `to_lat_num`) VALUES (450026930069509, 1692006258, 1692006258, 0, 450017298673797, 450014810120261, 450014810067013, 0, 0, 450014723739717, '', 450014810120261, 450026929364997, 450014654951493, 450014810120261, 450017298739333, 450014599127109, 1, 1, 1, 1, 1);

```

```sql
-- 查询sql
SELECT * FROM `obj_rel_1` WHERE from_oid = 450363225051141 AND to_oid = 450017298739333;
-- return empty set
```

## linux /tmp 目录定时清理

在centos下，`/usr/lib/tmpfiles.d/tmp.conf` 文件中定义了定期清理规则

## linux jni 导致内存泄漏


## update name_rule执行慢


### 测试1：有事务在执行

| Status                        | Duration | CPU_user | CPU_system | Context_voluntary | Context_involuntary | Block_ops_in | Block_ops_out | Messages_sent | Messages_received | Page_faults_major | Page_faults_minor | Swaps | Source_function          | Source_file          | Source_line |
 |-------------------------------|----------|----------|------------|-------------------|---------------------|--------------|---------------|---------------|-------------------|-------------------|-------------------|-------|--------------------------|----------------------|-------------|
| starting                      | 0.000050 | 0.000031 | 0.000018   | 0                 | 0                   | 0            | 0             | 0             | 0                 | 0                 | 0                 | 0     |                          |                      |             |
| Executing hook on transaction | 0.000008 | 0.000005 | 0.000003   | 0                 | 0                   | 0            | 0             | 0             | 0                 | 0                 | 0                 | 0     | launch_hook_trans_begin	 | rpl_handler.cc	      | 1475        |
| starting                      | 0.000009 | 0.000006 | 0.000003   | 0                 | 0                   | 0            | 0             | 0             | 0                 | 0                 | 0                 | 0     | launch_hook_trans_begin  | rpl_handler.cc       | 1477        |
| checking permissions          | 0.000008 | 0.000005 | 0.000003   | 0                 | 0                   | 0            | 0             | 0             | 0                 | 0                 | 0                 | 0     | check_access             | sql_authorization.cc | 2145        |
| Opening tables                | 0.000022 | 0.000014 | 0.000008   | 0                 | 0                   | 0            | 0             | 0             | 0                 | 0                 | 0                 | 0     | open_tables              | sql_base.cc          | 5795        |
| init                          | 0.000009 | 0.000006 | 0.000003   | 0                 | 0                   | 0            | 0             | 0             | 0                 | 0                 | 0                 | 0     | execute                  | sql_select.cc        | 556         |
| System lock                   | 0.000034 | 0.000022 | 0.000013   | 0                 | 0                   | 0            | 0             | 0             | 0                 | 0                 | 0                 | 0     | mysql_lock_tables        | lock.cc              | 331         |
| updating                      | 2.112052 | 0.012632 | 0.026797   | 5551              | 276                 | 0            | 83352         | 0             | 0                 | 0                 | 0                 | 0     | update_single_table      | sql_update.cc        | 841         |
| end                           | 0.000056 | 0.000036 | 0.000020   | 0                 | 0                   | 0            | 0             | 0             | 0                 | 0                 | 0                 | 0     | execute                  | sql_select.cc        | 589         |
| query end                     | 0.000009 | 0.000006 | 0.000003   | 0                 | 0                   | 0            | 0             | 0             | 0                 | 0                 | 0                 | 0     | mysql_execute_command    | sql_parse.cc         | 4873        |
| waiting for handler commit    | 0.018816 | 0.000751 | 0.000429   | 163               | 5                   | 792          | 960           | 0             | 0                 | 0                 | 45                | 0     | ha_commit_trans	         | handler.cc	          | 1610        |
| closing tables                | 0.000021 | 0.000013 | 0.000008   | 0                 | 0                   | 0            | 0             | 0             | 0                 | 0                 | 0                 | 0     | mysql_execute_command    | sql_parse.cc         | 4936        |
| freeing items                 | 0.000050 | 0.000019 | 0.000010   | 0                 | 0                   | 0            | 0             | 0             | 0                 | 0                 | 0                 | 0     | dispatch_sql_command     | sql_parse.cc         | 5405        |
| cleaning up                   | 0.000014 | 0.000008 | 0.000005   | 0                 | 0                   | 0            | 0             | 0             | 0                 | 0                 | 0                 | 0     | dispatch_command         | sql_parse.cc         | 2484        |

### 测试2：有事务在执行

| Status                         | Duration | CPU_user | CPU_system | Context_voluntary | Context_involuntary | Block_ops_in | Block_ops_out | Messages_sent | Messages_received | Page_faults_major | Page_faults_minor | Swaps | Source_function         | Source_file          | Source_line |
|--------------------------------|----------|----------|------------|-------------------|---------------------|--------------|---------------|---------------|-------------------|-------------------|-------------------|-------|-------------------------|----------------------|-------------|
| starting                       | 0.000095 | 0.000061 | 0.000034   |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | NULL                    | NULL                 | NULL        |
| Executing hook on transaction  | 0.000011 | 0.000006 | 0.000004   |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | launch_hook_trans_begin | rpl_handler.cc       |        1475 |
| starting                       | 0.000012 | 0.000008 | 0.000004   |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | launch_hook_trans_begin | rpl_handler.cc       |        1477 |
| checking permissions           | 0.000010 | 0.000006 | 0.000004   |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | check_access            | sql_authorization.cc |        2145 |
| Opening tables                 | 0.000030 | 0.000019 | 0.000011   |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | open_tables             | sql_base.cc          |        5795 |
| init                           | 0.000010 | 0.000007 | 0.000003   |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | execute                 | sql_select.cc        |         556 |
| System lock                    | 0.000052 | 0.000033 | 0.000019   |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | mysql_lock_tables       | lock.cc              |         331 |
| updating                       | 2.112087 | 0.016787 | 0.021800   |              4886 |                 227 |          288 |         71472 |             0 |                 0 |                 0 |                 4 |     0 | update_single_table     | sql_update.cc        |         841 |
| end                            | 0.000061 | 0.000038 | 0.000022   |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | execute                 | sql_select.cc        |         589 |
| query end                      | 0.000010 | 0.000007 | 0.000004   |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | mysql_execute_command   | sql_parse.cc         |        4873 |
| waiting for handler commit     | 0.060444 | 0.003950 | 0.001984   |               350 |                  11 |          448 |          2248 |             0 |                 0 |                 0 |                11 |     0 | ha_commit_trans         | handler.cc           |        1610 |
| closing tables                 | 0.000046 | 0.000029 | 0.000017   |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | mysql_execute_command   | sql_parse.cc         |        4936 |
| freeing items                  | 0.000034 | 0.000015 | 0.000008   |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | dispatch_sql_command    | sql_parse.cc         |        5405 |
| cleaning up                    | 0.000012 | 0.000007 | 0.000004   |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | dispatch_command        | sql_parse.cc         |        2484 |

### 测试3：无事务执行

| Status                         | Duration | CPU_user | CPU_system | Context_voluntary | Context_involuntary | Block_ops_in | Block_ops_out | Messages_sent | Messages_received | Page_faults_major | Page_faults_minor | Swaps | Source_function         | Source_file          | Source_line |
|--------------------------------|----------|----------|------------|-------------------|---------------------|--------------|---------------|---------------|-------------------|-------------------|-------------------|-------|-------------------------|----------------------|-------------|
| starting                       | 0.000085 | 0.000084 | 0.000000   |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | NULL                    | NULL                 | NULL        |
| Executing hook on transaction  | 0.000008 | 0.000008 | 0.000000   |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | launch_hook_trans_begin | rpl_handler.cc       |        1475 |
| starting                       | 0.000011 | 0.000011 | 0.000000   |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | launch_hook_trans_begin | rpl_handler.cc       |        1477 |
| checking permissions           | 0.000009 | 0.000009 | 0.000000   |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | check_access            | sql_authorization.cc |        2145 |
| Opening tables                 | 0.000031 | 0.000030 | 0.000000   |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | open_tables             | sql_base.cc          |        5795 |
| init                           | 0.000009 | 0.000009 | 0.000000   |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | execute                 | sql_select.cc        |         556 |
| System lock                    | 0.000051 | 0.000051 | 0.000000   |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | mysql_lock_tables       | lock.cc              |         331 |
| updating                       | 0.008651 | 0.000130 | 0.000000   |                 2 |                   0 |           32 |             0 |             0 |                 0 |                 0 |                 0 |     0 | update_single_table     | sql_update.cc        |         841 |
| end                            | 0.000015 | 0.000011 | 0.000004   |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | execute                 | sql_select.cc        |         589 |
| query end                      | 0.000008 | 0.000005 | 0.000003   |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | mysql_execute_command   | sql_parse.cc         |        4873 |
| waiting for handler commit     | 0.012410 | 0.000109 | 0.000060   |                31 |                   0 |            0 |            16 |             0 |                 0 |                 0 |                 0 |     0 | ha_commit_trans         | handler.cc           |        1610 |
| closing tables                 | 0.000012 | 0.000008 | 0.000005   |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | mysql_execute_command   | sql_parse.cc         |        4936 |
| freeing items                  | 0.000051 | 0.000017 | 0.000009   |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | dispatch_sql_command    | sql_parse.cc         |        5405 |
| cleaning up                    | 0.000011 | 0.000007 | 0.000004   |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | dispatch_command        | sql_parse.cc         |        2484 |